{% extends "base.html" %}

{% block links %}
<link rel="stylesheet" href="../static/css/testbooking.css"/>
{% endblock %}

{% block title %}
Book Appointment - BCIT
{% endblock %}
{% block content %}
<a href="{{url_for('main.services')}}"><button class="go-back">Go Back</button></a>
<form action="/booking/confirm" method="post">
    <div class="detail-cont name">
        <h2>Booking appointment with:</h2>
        <p>{{ selected_advisor.name }} {{ selected_advisor.surname }}</p>
    </div>

     <!-- Hidden input to include advisor_id -->
        <input type="hidden" name="appt_advisor" value="{{ selected_advisor.id }}">

    <div class="detail-cont purpose">
        <h3>Appointment Purpose:</h3>
        <textarea id="purpose-field" name="appt_purpose" rows="5" placeholder="State the purpose of your visit here..."></textarea>
    </div>
    <div class="detail-cont type">
        <h3>Appointment type:</h3>
        <select class="appt-type" name="appt_type" size="2">
            <option value="in-person">In-Person</option>
            <option value="phone-call">Phone Call</option>
        </select>
    </div>
    <div class="detail-cont schedule">
        <h3>Available dates:</h3>
        <input id="calendar" type="date" name="appt_date" min="2025-05-05">
    </div>
    <div class="detail-cont time">
        <h3>Available times:</h3>
        <select name="appt_time" id="time">
            <option value="08:00">08:00 AM</option>
            <option value="09:00">09:00 AM</option>
            <option value="10:00">10:00 AM</option>
            <option value="11:00">11:00 AM</option>
            <option value="12:00">12:00 PM</option>
            <option value="13:00">1:00 PM</option>
            <option value="14:00">2:00 PM</option>
            <option value="15:00">3:00 PM</option>
            <option value="16:00">4:00 PM</option>
        </select>
    </div>
        <button class="continue-btn">Continue</button>
</form>
<script>
    // Get the calendar input element
    const calendar = document.getElementById("calendar");

    // Set the minimum date to today's date
    calendar.min = new Date().toLocaleDateString('fr-ca');

    // Add an event listener to prevent selecting weekends
    calendar.addEventListener("input", function () {
        const selectedDate = new Date(this.value);
        const day = selectedDate.getDay(); // 0 = Sunday, 6 = Saturday

        // If the selected day is Saturday (6) or Sunday (0), clear the value
        if (day === 5 || day === 6) {
            alert("Weekends are not available for booking. Please select a weekday.");
            this.value = ""; // Clear the invalid date
        }
    });
</script>
{% endblock %}